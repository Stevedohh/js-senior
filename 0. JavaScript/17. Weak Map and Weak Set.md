
### Weak Map
---

ะะตัะฒะพะต ะตะณะพ ะพัะปะธัะธะต ะพัย`Map`ยะฒ ัะพะผ, ััะพ ะบะปััะธ ะฒย`WeakMap`ยะดะพะปะถะฝั ะฑััั ะพะฑัะตะบัะฐะผะธ, ะฐ ะฝะต ะฟัะธะผะธัะธะฒะฝัะผะธ ะทะฝะฐัะตะฝะธัะผะธ:

ะะฐะบ ัะฐะฑะพัะฐะตั `Map`

```js
let john = { name: "John" }; 

let map = new Map(); 
map.set(john, "..."); 

john = null; 

// ะฟะตัะตะทะฐะฟะธััะฒะฐะตะผ ัััะปะบั ะฝะฐ ะพะฑัะตะบั 
// ะพะฑัะตะบั john ัะพััะฐะฝัะฝ ะฒะฝัััะธ ะพะฑัะตะบัะฐ `Map`, ะพะฝ ะดะพัััะฟะตะฝ ัะตัะตะท map.keys()
```

ะะฐะบ ัะฐะฑะพัะฐะตั `WeakMap`

ะตัะปะธ ะผั ะธัะฟะพะปัะทัะตะผ ะพะฑัะตะบั ะฒ ะบะฐัะตััะฒะต ะบะปััะฐ ะธ ะตัะปะธ ะฑะพะปััะต ะฝะตั ัััะปะพะบ ะฝะฐ ััะพั ะพะฑัะตะบั, ัะพ ะพะฝ ะฑัะดะตั ัะดะฐะปัะฝ ะธะท ะฟะฐะผััะธ **(ะธ ะธะท ะพะฑัะตะบัะฐย`WeakMap`)** ะฐะฒัะพะผะฐัะธัะตัะบะธ.

```js
let john = { name: "John" }; 

let weakMap = new WeakMap(); 
weakMap.set(john, "..."); 

john = null; 

// ะฟะตัะตะทะฐะฟะธััะฒะฐะตะผ ัััะปะบั ะฝะฐ ะพะฑัะตะบั 
// ะพะฑัะตะบั john ัะดะฐะปัะฝ ะธะท ะฟะฐะผััะธ!
```

`WeakMap`ยะฝะต ะฟะพะดะดะตัะถะธะฒะฐะตั ะฟะตัะตะฑะพั ะธ ะผะตัะพะดัย`keys()`,ย`values()`,ย`entries()`, ัะฐะบ ััะพ ะฝะตั ัะฟะพัะพะฑะฐ ะฒะทััั ะฒัะต ะบะปััะธ ะธะปะธ ะทะฝะฐัะตะฝะธั ะธะท ะฝะตั.

ะย`WeakMap`ยะฟัะธัััััะฒััั ัะพะปัะบะพ ัะปะตะดัััะธะต ะผะตัะพะดั:

-   `weakMap.get(key)`
-   `weakMap.set(key, value)`
-   `weakMap.delete(key)`
-   `weakMap.has(key)`

---
### ะะพ ะฝะฐััั ะพะฝะพ ะฝะฐะผ ะฝะฐะดะพ?
---

ะัะปะธ ะผั ัะฐะฑะพัะฐะตะผ ั ะพะฑัะตะบัะพะผ, ะบะพัะพััะน ยซะฟัะธะฝะฐะดะปะตะถะธัยป ะดััะณะพะผั ะบะพะดั, ะผะพะถะตั ะฑััั ะดะฐะถะต ััะพัะพะฝะฝะตะน ะฑะธะฑะปะธะพัะตะบะต, ะธ ัะพัะธะผ ัะพััะฐะฝะธัั ั ัะตะฑั ะบะฐะบะธะต-ัะพ ะดะฐะฝะฝัะต ะดะปั ะฝะตะณะพ, ะบะพัะพััะต ะดะพะปะถะฝั ัััะตััะฒะพะฒะฐัั ะปะธัั ะฟะพะบะฐ ัััะตััะฒัะตั ััะพั ะพะฑัะตะบั, ัะพย`WeakMap`ยโ ะบะฐะบ ัะฐะท ัะพ, ััะพ ะฝัะถะฝะพ.

ะั ะบะปะฐะดัะผ ััะธ ะดะฐะฝะฝัะต ะฒย`WeakMap`, ะธัะฟะพะปัะทัั ะพะฑัะตะบั ะบะฐะบ ะบะปัั, ะธ ะบะพะณะดะฐ ัะฑะพััะธะบ ะผััะพัะฐ ัะดะฐะปะธั ะพะฑัะตะบัั ะธะท ะฟะฐะผััะธ, ะฐััะพัะธะธัะพะฒะฐะฝะฝัะต ั ะฝะธะผะธ ะดะฐะฝะฝัะต ัะพะถะต ะฐะฒัะพะผะฐัะธัะตัะบะธ ะธััะตะทะฝัั.

```js
weakMap.set(john, "ัะตะบัะตัะฝัะต ะดะพะบัะผะตะฝัั"); 
// ะตัะปะธ john ัะผััั, "ัะตะบัะตัะฝัะต ะดะพะบัะผะตะฝัั" ะฑัะดัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะฝะธััะพะถะตะฝั
```


#### ะัะธะผะตั ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ ะธ ะบะพะปะปะธัะตััะฒะพะผ ะฟะพัะตัะตะฝะธะน

ะัะตะดะฟะพะปะพะถะธะผ, ั ะฝะฐั ะตััั ะบะพะด, ะบะพัะพััะน ะฒะตะดัั ัััั ะฟะพัะตัะตะฝะธะน ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน. ะะฝัะพัะผะฐัะธั ััะฐะฝะธััั ะฒ ะบะพะปะปะตะบัะธะธย`Map`: ะพะฑัะตะบั, ะฟัะตะดััะฐะฒะปัััะธะน ะฟะพะปัะทะพะฒะฐัะตะปั, ัะฒะปัะตััั ะบะปััะพะผ, ะฐ ะบะพะปะธัะตััะฒะพ ะฒะธะทะธัะพะฒ โ ะทะฝะฐัะตะฝะธะตะผ. ะะพะณะดะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐั ะฟะพะบะธะดะฐะตั (ะตะณะพ ะพะฑัะตะบั ัะดะฐะปัะตััั ัะฑะพััะธะบะพะผ ะผััะพัะฐ), ัะพ ะฑะพะปััะต ะฝะตั ัะผััะปะฐ ััะฐะฝะธัั ัะพะพัะฒะตัััะฒัััะธะน ัััััะธะบ ะฟะพัะตัะตะฝะธะน.

#### ะัะธะผะตั ั ะบะตัะธัะพะฒะฐะฝะธะตะผ

ะัะปะธ ะผั ะฑัะดะตะผ ะธัะฟะพะปัะทะพะฒะฐััย`WeakMap`ยะฒะผะตััะพย`Map`, ัะพ ััะฐ ะฟัะพะฑะปะตะผะฐ ะธััะตะทะฝะตั: ะทะฐะบะตัะธัะพะฒะฐะฝะฝัะต ัะตะทัะปััะฐัั ะฑัะดัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะดะฐะปะตะฝั ะธะท ะฟะฐะผััะธ ัะฑะพััะธะบะพะผ ะผััะพัะฐ.

```js
//ย๐ยcache.js
letยcacheย=ยnewยWeakMap();

//ยะฒััะธัะปัะตะผยะธยะทะฐะฟะพะผะธะฝะฐะตะผยัะตะทัะปััะฐั
functionยprocess(obj)ย{
ยยifย(!cache.has(obj))ย{
ยยยยletยresultย=ย/*ยะฒััะธัะปัะตะผยัะตะทัะปััะฐัยะดะปัยะพะฑัะตะบัะฐย*/ยobj;
ยยยยcache.set(obj,ยresult);
ยย} 

ยยreturnยcache.get(obj);
}
  

//ย๐ยmain.js
letยobjย=ย{/*ยะบะฐะบะพะน-ัะพยะพะฑัะตะบัย*/};

letยresult1ย=ยprocess(obj);
letยresult2ย=ยprocess(obj);

//ย...ะฟะพะทะถะต,ยะบะพะณะดะฐยะพะฑัะตะบัยะฑะพะปััะตยะฝะตยะฝัะถะตะฝ:
objย=ยnull;

//ยะะตัยะฒะพะทะผะพะถะฝะพััะธยะฟะพะปััะธััยcache.size,ยัะฐะบยะบะฐะบยััะพยWeakMap,
//ยะฝะพยะพะฝยัะฐะฒะตะฝย0ยะธะปะธยัะบะพัะพยะฑัะดะตัยัะฐะฒะตะฝย0
//ยะะพะณะดะฐยัะฑะพััะธะบยะผััะพัะฐยัะดะฐะปัะตัยobj,ยัะฒัะทะฐะฝะฝัะตยัยะฝะธะผยะดะฐะฝะฝัะตยะธะทยะบะตัะฐยัะพะถะตยัะดะฐะปััััั
```

---
### Weak Map
---

ะะพะปะปะตะบัะธัย`WeakSet`ยะฒะตะดัั ัะตะฑั ะฟะพัะพะถะต:

-   ะะฝะฐ ะฐะฝะฐะปะพะณะธัะฝะฐย`Set`, ะฝะพ ะผั ะผะพะถะตะผ ะดะพะฑะฐะฒะปััั ะฒย`WeakSet`ยัะพะปัะบะพ ะพะฑัะตะบัั (ะฝะต ะฟัะธะผะธัะธะฒะฝัะต ะทะฝะฐัะตะฝะธั).
-   ะะฑัะตะบั ะฟัะธัััััะฒัะตั ะฒ ะผะฝะพะถะตััะฒะต ัะพะปัะบะพ ะดะพ ัะตั ะฟะพั, ะฟะพะบะฐ ะดะพัััะฟะตะฝ ะณะดะต-ัะพ ะตัั.
-   ะะฐะบ ะธย`Set`, ะพะฝะฐ ะฟะพะดะดะตัะถะธะฒะฐะตัย`add`,ย`has`ยะธย`delete`, ะฝะพ ะฝะตย`size`,ย`keys()`ยะธ ะฝะต ัะฒะปัะตััั ะฟะตัะตะฑะธัะฐะตะผะพะน.

---
### ะัะพะณะพ
---

`WeakMap`ยโ ััะพย`Map`-ะฟะพะดะพะฑะฝะฐั ะบะพะปะปะตะบัะธั, ะฟะพะทะฒะพะปัััะฐั ะธัะฟะพะปัะทะพะฒะฐัั ะฒ ะบะฐัะตััะฒะต ะบะปััะตะน ัะพะปัะบะพ ะพะฑัะตะบัั, ะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะดะฐะปัััะฐั ะธั ะฒะผะตััะต ั ัะพะพัะฒะตัััะฒัััะธะผะธ ะทะฝะฐัะตะฝะธัะผะธ, ะบะฐะบ ัะพะปัะบะพ ะพะฝะธ ััะฐะฝะพะฒัััั ะฝะตะดะพััะธะถะธะผัะผะธ ะธะฝัะผะธ ะฟัััะผะธ.

`WeakSet`ยโ ััะพย`Set`-ะฟะพะดะพะฑะฝะฐั ะบะพะปะปะตะบัะธั, ะบะพัะพัะฐั ััะฐะฝะธั ัะพะปัะบะพ ะพะฑัะตะบัั ะธ ัะดะฐะปัะตั ะธั, ะบะฐะบ ัะพะปัะบะพ ะพะฝะธ ััะฐะฝะพะฒัััั ะฝะตะดะพััะธะถะธะผัะผะธ ะธะฝัะผะธ ะฟัััะผะธ.

ะะฑะต ััะธั ััััะบัััั ะดะฐะฝะฝัั ะฝะต ะฟะพะดะดะตัะถะธะฒะฐัั ะผะตัะพะดั ะธ ัะฒะพะนััะฒะฐ, ัะฐะฑะพัะฐััะธะต ัะพ ะฒัะตะผ ัะพะดะตัะถะธะผัะผ ััะฐะทั ะธะปะธ ะฒะพะทะฒัะฐัะฐััะธะต ะธะฝัะพัะผะฐัะธั ะพ ัะฐะทะผะตัะต ะบะพะปะปะตะบัะธะธ. ะะพะทะผะพะถะฝั ัะพะปัะบะพ ะพะฟะตัะฐัะธะธ ะฝะฐ ะพัะดะตะปัะฝะพะผ ัะปะตะผะตะฝัะต ะบะพะปะปะตะบัะธะธ.

`WeakMap`ยะธย`WeakSet`ยะธัะฟะพะปัะทััััั ะบะฐะบ ะฒัะฟะพะผะพะณะฐัะตะปัะฝัะต ััััะบัััั ะดะฐะฝะฝัั ะฒ ะดะพะฟะพะปะฝะตะฝะธะต ะบ ยซะพัะฝะพะฒะฝะพะผัยป ะผะตััั ััะฐะฝะตะฝะธั ะพะฑัะตะบัะฐ. ะัะปะธ ะพะฑัะตะบั ัะดะฐะปัะตััั ะธะท ะพัะฝะพะฒะฝะพะณะพ ััะฐะฝะธะปะธัะฐ ะธ ะฝะธะณะดะต ะฝะต ะธัะฟะพะปัะทัะตััั, ะบัะพะผะต ะบะฐะบ ะฒ ะบะฐัะตััะฒะต ะบะปััะฐ ะฒย`WeakMap`ยะธะปะธ ะฒย`WeakSet`, ัะพ ะพะฝ ะฑัะดะตั ัะดะฐะปัะฝ ะฐะฒัะพะผะฐัะธัะตัะบะธ.